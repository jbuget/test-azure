<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Nouveau contact</title>
    <style>
      :root { --fg:#111; --bg:#fff; --muted:#666; }
      * { box-sizing: border-box; }
      body { margin: 0; font: 14px/1.4 -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif; color: var(--fg); background: var(--bg); }
      header { padding: 12px 16px; border-bottom: 1px solid #eee; display:flex; gap:8px; align-items:center; }
      header a { text-decoration:none; }
      main { max-width: 720px; margin: 0 auto; padding: 16px; }
      h1 { font-size: 18px; margin: 0 0 12px; }
      .row { display:flex; gap:8px; align-items:center; }
      .btn { display:inline-block; padding:6px 10px; border:1px solid #ddd; border-radius:6px; background:#f9f9f9; color:#000; text-decoration:none; cursor:pointer; }
      form { display:grid; gap:8px; }
      label { display:grid; gap:4px; }
      input { padding:8px; border:1px solid #ddd; border-radius:6px; font: inherit; }
      .muted { color: var(--muted); font-size:12px; }
    </style>
  </head>
  <body>
    <header>
      <a href="/">Accueil</a>
      <span class="muted">/</span>
      <a href="/contacts">Contacts</a>
    </header>
    <main>
      <h1>Nouveau contact</h1>
      <form id="f">
        <label>Prénom<input name="firstName" required /></label>
        <label>Nom<input name="lastName" required /></label>
        <label>Téléphone<input name="phoneNumber" required /></label>
        <label>Email<input type="email" name="email" required /></label>
        <div class="row" style="gap:12px;">
          <button class="btn" type="submit">Créer</button>
          <a class="btn" href="/contacts">Annuler</a>
        </div>
      </form>
    </main>
    <script>
      document.querySelector('#f').addEventListener('submit', async (e)=>{
        e.preventDefault();
        const fd = new FormData(e.target);
        const data = Object.fromEntries(fd.entries());
        const res = await fetch('/api/contacts', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(data) });
        if (res.ok) location.href='/contacts'; else alert('Erreur lors de la création');
      });
    </script>
  </body>
</html>
